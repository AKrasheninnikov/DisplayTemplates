<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>List (Hide)</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:MasterPageDescription msdt:dt="string">This is a control template that hides the web part when no results are retrieved.</mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F385106601</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#Content Web Parts;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
<mso:HtmlDesignStatusAndPreview msdt:dt="string">http://intranet/sites/SPSUK/_catalogs/masterpage/tests/HideWebpart/Control_List_Hide.html, Conversion successful.</mso:HtmlDesignStatusAndPreview>
<mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

<body>
    <div id="Control_List">
<!--#_ 
if (!$isNull(ctx.ClientControl) &&
    !$isNull(ctx.ClientControl.shouldRenderControl) &&
    !ctx.ClientControl.shouldRenderControl())
{
    return "";
}
ctx.ListDataJSONGroupsKey = "ResultTables";

var ListRenderRenderWrapper = function(itemRenderResult, inCtx, tpl)
{
    var iStr = [];
    iStr.push('<li>');
    iStr.push(itemRenderResult);
    iStr.push('</li>');
    return iStr.join('');
}
ctx['ItemRenderWrapper'] = ListRenderRenderWrapper;
_#-->
    <ul class="cbs-List">
        _#= ctx.RenderGroups(ctx) =#_
    </ul>

<!--#_
// Check if the web part should be hidden (when no results are retrieved)
if (ctx.ClientControl.get_shouldShowNoResultMessage()) {
    var containerClass = $htmlEncode(ctx.ClientControl.get_nextUniqueId() + "_hide");
    AddPostRenderCallback(ctx, function() {
        // Check if page is in edit mode
        var inDesignMode = document.forms[MSOWebPartPageFormName].MSOLayout_InDesignMode;
        var wikiInEditMode = document.forms[MSOWebPartPageFormName]._wikiPageMode;
        var inEdit = false;
        if (typeof inDesignMode !== "undefined") {
            inEdit = inDesignMode.value === "1" ? true : false;
        }
        if (typeof wikiInEditMode !== "undefined") {
            inEdit = wikiInEditMode.value === "Edit" ? true : false;
        }
        // Hide the webpart when page is not in edit mode
        if (!inEdit) {
            var container = document.getElementsByClassName(containerClass);
            if (container.length) {
                var elm = container[0];
                if (typeof elm.classList !== 'undefined') {
                    while ((elm = elm.parentElement) && !elm.classList.contains('s4-wpcell-plain'));
                } else {
                    while ((elm = elm.parentElement) && elm.className.indexOf('s4-wpcell-plain') === -1);
                }
                if (typeof elm !== "undefined" && elm !== null) {
                    elm.style.display = "none";
                }
            }
        }
    });
_#-->
    <div class="_#= containerClass =#_"></div>
<!--#_
}
_#-->

    </div>
</body>
</html>
